# DeathRoll Enhancer - Version 2.2.0 Release Notes
## TBC Compatibility & Bug Fix Edition

**Release Date:** January 14, 2026
**Package:** DeathRollEnhancer V2.2.0 - TBC Update.zip
**Size:** 65,370 bytes

---

## What's New

### üéØ TBC Classic Support
- **Full compatibility** with TBC Classic servers (Interface: 20505)
- Added `C_Timer` shim for older WoW versions
- Zero performance impact - uses native API when available
- Works seamlessly across **ALL** WoW versions

### üêõ Critical Bug Fixes (20+ Issues Resolved)
- Fixed race conditions causing duplicate roll detection
- Fixed UI crashes from nil references
- Fixed database corruption from negative counters
- Fixed concurrent game state issues
- Fixed memory leaks in roll tracking
- Fixed invalid input causing database corruption

### üõ°Ô∏è Stability Improvements
- Comprehensive nil guards throughout codebase
- Enhanced game state validation
- Proper cleanup on logout/disable
- Infinite loop protection
- Improved error handling and debug logging

---

## Installation

1. Extract `DeathRollEnhancer V2.2.0 - TBC Update.zip`
2. Copy the extracted **DeathRollEnhancer** folder to:
   - **Retail:** `World of Warcraft\_retail_\Interface\AddOns\`
   - **Classic:** `World of Warcraft\_classic_\Interface\AddOns\`
   - **TBC:** `World of Warcraft\_classic_\Interface\AddOns\`
3. Restart WoW or type `/reload`
4. Type `/dr` to open the addon

---

## Compatibility

| Version | Status |
|---------|--------|
| Classic Era (1.15.3) | ‚úÖ Supported |
| **TBC Classic (2.5.5)** | ‚úÖ **NEW!** |
| Wrath Classic (3.4.3) | ‚úÖ Supported |
| Cata Classic (4.4.0) | ‚úÖ Supported |
| Retail (11.0.0+) | ‚úÖ Supported |

---

## Detailed Changelog

See [CHANGELOG.md](../CHANGELOG.md) for complete list of changes.

### Key Fixes

#### Roll Detection
- **Roll deduplication system** - No more duplicate processing
- **Anchored pattern matching** - Prevents false positives

#### Game Stability
- **Game state validation** - Prevents crashes mid-game
- **Concurrent game prevention** - One game at a time
- **Proper state cleanup** - Clean logout/disable handling

#### UI Safety
- **Comprehensive nil guards** - No more UI-related crashes
- **Timer race condition fix** - Correct timeout handling
- **UI scale management** - Prevents double-scaling

#### Database Integrity
- **Counter protection** - No negative values possible
- **Date parsing validation** - Handles corrupted dates
- **Input sanitization** - Prevents invalid data entry

#### Memory Management
- **Memory leak fixes** - Proper cleanup of recent rolls
- **Infinite loop protection** - Iteration limits on all loops

---

## Commands

| Command | Description |
|---------|-------------|
| `/dr` or `/deathroll` | Open the main DeathRoll window |
| `/dr config` | Open configuration options |
| `/dr edit` | Edit recent game records |
| `/dr fixgold` | Recalculate gold tracking totals |
| `/drh [player]` | View history with specific player |

---

## Support

- **Issues:** [GitHub Issues](https://github.com/EgyptianSheikh/DeathRollEnhancer/issues)
- **Author:** EgyptianSheikh
- **Powered by:** Ace3

---

## Upgrade Notes

### From v2.1.x
All settings and data are preserved. No action required - just install and reload.

### Breaking Changes
None. This is a pure bug fix and compatibility release.

### Recommended Actions
- Test the addon on your TBC server
- Report any issues on GitHub
- Enjoy stable DeathRolling! üé≤
